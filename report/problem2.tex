\section{Optimal Control of Pitch/Travel without Feedback}\label{sec:prob2}

\subsection{State-space formulation}
\begin{equation}
\begin{aligned}
	\dot{x}&=\begin{bmatrix} \dot{\lambda} \\ \dot{r}  \\ \dot{p} \\ \ddot{p} \end{bmatrix}
	= A_cx + B_cu
	\\
	A_c &= \begin{bmatrix} 0 & 1 & 0 & 0 \\ 0 & 0 & K_2 & 0 \\ 0 & 0 & 0 & 1 \\ 0 & 0 & -K_1K_p & -K_1K_{pd} \end{bmatrix}
	B_c = \begin{bmatrix}0 \\ 0 \\ 0 \\K_1K_{pp} \end{bmatrix}
\end{aligned}
\end{equation}
This is a model of the pitch and travel of the helicopter and the pitch controller of the basic control layer. Optimization layer and derivation is not inlcuded.


\subsection{Discretization}
\begin{equation}
\begin{aligned}
	\frac{x_{k+1} - x_k}{\Delta t} &= A_c x_k + B_c u_k
	\\
	x_{k+1} &= (I + A_c \Delta t)x_k + B_c \Delta t u_k = Ax_k+Bu_k
\end{aligned}
\end{equation}

\subsection{Computation of optimal trajectory}
\begin{equation}
\begin{aligned}
x_0 &= \begin{bmatrix} \lambda_0=\pi \\ 0 \\ 0 \\ 0 \end{bmatrix}, x_f=\begin{bmatrix} \lambda_f=0 \\ 0 \\ 0 \\0 \end{bmatrix}
\\
| p_k | & \leq \frac{30\pi}{180}, | p_c | \leq \frac{30\pi}{180}
\\
\phi &= \sum_{i=1}^{N}(\lambda_i - \lambda_f)^2 + qp_{ci}^2,q \geq 0
\\
\Delta t &= 0.25s, N=100
\end{aligned}
\end{equation}


%Is this written by us, or is this a latex example
An optimal trajectory can be generated by minimizing the cost function for some scalar weight $q \geq 0$, while implementing the system dynamics and other user-defined limitations as linear constraints.
Note that this cost function does not take into consideration that $\lambda_i$ plus some multiple of $2\pi$ describes the same physical orientation of the helicopter. For example, if the reference is $0$ and $\lambda_i = 2\pi$, it will be regarded as a large error, even though the helicopter is infact in the desired orientation. A more optimal scheme would take this into consideration.